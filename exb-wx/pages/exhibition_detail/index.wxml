<!-- 展览详情页面 -->
<view class="container">
  <!-- 顶部导航栏 -->
  <!-- https://wechat-miniprogram.github.io/weui/docs/icon.html#icon-%E5%88%97%E8%A1%A8 -->
  <!-- <view class="nav-bar">
    <button class="nav-btn" bindtap="goBack">
      <text class="icon">arrow_back</text>
    </button>
    <text class="nav-title" wx:if="{{showTitle}}">展览详情</text>
    <view class="nav-right">
      <button class="nav-btn" bindtap="toggleFavorite">
        <text class="icon">{{isFavorite ? 'favorite' : 'favorite_border'}}</text>
      </button>
      <button class="nav-btn" bindtap="shareExhibition">
        <text class="icon">share</text>
      </button>
    </view>
  </view> -->

  <!-- 滚动内容区域 -->
  <scroll-view class="content" scroll-y="true" bindscroll="onScroll" scroll-top="{{scrollTop}}" enable-back-to-top="true">
    <!-- 加载状态 -->
    <view class="loading-container" wx:if="{{isLoading}}">
      <text class="loading-text">加载中...</text>
    </view>

    <!-- 展览封面图 -->
    <view class="cover-container" wx:if="{{!isLoading}}">
      <image class="cover-img" src="{{exhibition.coverImg}}" mode="aspectFill"></image>
      <view class="cover-gradient"></view>
    </view>

    <!-- 展览信息 -->
    <view class="info-section" wx:if="{{!isLoading}}">
      <view class="title-section">
        <text class="exhibition-title">{{exhibition.title}}</text>
        <view class="tag-container">
          <text class="tag tag-primary">{{exhibition.exhibitionType || '展览'}}</text>
          <text class="tag tag-secondary" wx:if="{{exhibition.contentTags}}">{{exhibition.contentTags.split(',')[0] || ''}}</text>
        </view>
      </view>

      <view class="divider"></view>

      <!-- 展览详情 -->
      <view class="detail-list">
        <view class="detail-item">
          <view class="icon-container">
            <mp-icon type="field" icon="info" color="#4299f0" size="{{30}}"></mp-icon>
          </view>
          <view class="detail-content">
            <text class="label">展览时间</text>
            <text class="value">{{exhibition.startDate}} - {{exhibition.endDate}}</text>
          </view>
        </view>

        <view class="detail-item">
          <view class="icon-container">
            <mp-icon type="field" icon="location" color="#4299f0" size="{{30}}"></mp-icon>
          </view>
          <view class="detail-content">
            <text class="label">展览地点</text>
            <text class="value">{{exhibition.hall || '待定'}}</text>
          </view>
        </view>

        <view class="detail-item">
          <view class="icon-container">
            <mp-icon type="field" icon="contacts" color="#4299f0" size="{{30}}"></mp-icon>
          </view>
          <view class="detail-content">
            <text class="label">主办方</text>
            <view class="curator-info">
              <text class="value">{{exhibition.organizer || '未知'}}</text>
            </view>
          </view>
        </view>
      </view>

      <!-- 展览介绍 -->
      <view class="intro-section">
        <text class="section-title">展览介绍</text>
        <text class="intro-text">{{exhibition.description || '暂无介绍'}}</text>
        <!-- 如果介绍过长可以添加展开收起按钮 -->
        <button class="read-more-btn" bindtap="toggleIntro" wx:if="{{exhibition.description.length > 100}}" style="margin-left: 0rpx;">
          <text>{{showFullIntro ? '收起' : '阅读更多'}}</text>
          <mp-icon type="field" icon="{{showFullIntro ? 'back' : 'arrow'}}" color="#4299f0" size="{{10}}"></mp-icon>
        </button>
      </view>

      <!-- 主要展品 -->
      <view class="collections-section">
        <view class="section-header">
          <text class="section-title">主要展品</text>
        </view>
        
        <view class="collections-grid">
          <view class="collection-item" wx:for="{{collections}}" wx:key="index" bindtap="viewCollectionDetail" data-index="{{index}}">
            <view class="collection-img-container">
              <image class="collection-img" src="{{item.image}}" mode="widthFix"></image>
              <view class="audio-icon" wx:if="{{item.hasAudio}}">
                <mp-icon type="field" icon="voice" color="white" size="{{30}}"></mp-icon>
              </view>
            </view>
            <text class="collection-name">{{item.name}}</text>
            <text class="collection-artist">{{item.artist}}</text>
          </view>
        </view>
        
        <view class="no-collections" wx:if="{{collections.length === 0}}">
          <text>暂无展品信息</text>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- 底部操作栏 -->
  <view class="bottom-bar" wx:if="{{!isLoading}}">
    <button class="action-btn" bindtap="startAudioGuide" style="width: 100%;">
      <mp-icon type="field" icon="play2" color="gray" size="{{40}}"></mp-icon>
      <text>语音导览</text>
    </button>
  </view>
</view>